---
title: "US President Prediction"
subtitle: "Predict the results of 2024 US President Election"
author: 
  - Yun Chu
  - Felix Li
  - Wen Han Zhao 
thanks: "Code and data are available at: [https://github.com/younazhao/US-President-Prediction/tree/main](https://github.com/younazhao/US-President-Prediction/tree/main)."
date: 22 October 2024
date-format: long
abstract: "In this study, we aim to study the 2024 U.S. Presidential Election with the methodology of  polls of polls across various states. With the insightful analyses on polls provided by Redfiled & Wilton Strategies, the conducted survey on the population highlights various key point for the prediction of US president. Using Generalized Linear Models (GLMs), this report analyzes the accuracy of prediction in president votes through several key variables from pollster. The model incorporates variables such as pollscore, methodology, transparency_score and hypothetical. The prediction finding highlights the significance of candicate trustworthiness among the voter decision, providing insights for swing voters. This analysis offers valuable information into the potential electoral outcomes driving the 2024 US president election. "
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false
library(tidyverse)
library(knitr)
library(kableExtra)
library(readr)
library(dplyr)
library(rstanarm)
library(bayesplot)
library(ggplot2)
library(ggpubr)
```


# Introduction

Overview paragraph

Estimand paragraph

Results paragraph

Why it matters paragraph

Telegraphing paragraph: The remainder of this paper is structured as follows. @sec-data....





# Data {#sec-data}

## Overview

cite R, packages, dataa
The data used in this paper is source from FiveThirtyEight ("538presidentialpolls", 2024). T
We use the statistical programming language R [@citeR].... Our data.... Following @tellingstories, we consider...

Overview text


## Measurement
	
Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Outcome variables

Talk way more about it. 

## Predictor variables

Add graphs, tables and text.

Use sub-sub-headings for each outcome variable and feel free to combine a few into one if they go together naturally.



# Model {#sec-model}

In this analysis, we aim to model the popularity trends for the two 2024 president nominates, Kamala Harris and Donald Trump, based on high-quality polling data collected at the national level after Harris’s declaration on July 21, 2024. We used Bayesian linear regression models with Gaussian error structures to estimate changes in polling percentages over time for each candidate.

## Data Filtering and Preparation

The data were first filtered to retain only high-quality polls, defined as those with a numeric grade of 2.0 or above and a transparency score of 4 or higher. We focused exclusively on polls where the *state* variable indicates national coverage, ensuring the poll represents nationwide opinions rather than a single state, which could introduce bias. Additionally, we filtered for polls conducted after July 21, 2024, the date when Kamala Harris announced her candidacy.

To prevent issues with missing data in our models, we excluded any rows where key variables (such as polling percentage or end date) were missing.

## Model Specification

Two separate Bayesian linear regression models were fitted using the @rs package. Both models specified the formula:

\begin{align}
Y_i | \mu_i,\sigma  & \sim \text{Normal}(\mu_i,\sigma) \\
\mu_i & = \beta_0 + \beta_1X_{i1}\\
\beta_0 & \sim \text{Normal}(50, 5), \\ 
\beta_1 & \sim \text{Normal}(0, 0.1)
\end{align}

Where $Y_i$ is the support rate for Harris or Trump, separately, and $X_{i1}$ is the number of days passed after the latest polling sample of Trump or Harris. 

## Model Justification and Limitations
We opted to use two separate models for Trump and Harris, as their supporter demographics differ significantly in ways that are challenging to capture within a single or even a small set of variables @pew_harris_trump_2024. The polling dataset we obtained primarily reflects the characteristics and trends within individual polls rather than offering direct predictors of the presidential election outcome. To maximize the model’s reliability, we refined the dataset by selecting polls with high credibility rather than attempting to predict outcomes directly from the available data.

Our model uses a simple linear approach with time as the sole predictor variable. While this may introduce potential bias by making a simplifying assumption about the trend over time, it also has the advantage of being straightforward to fit and interpret. This trade-off allows us to capture general trends while minimizing the risk of overfitting to limited or potentially inconsistent data sources.


# Results {#set-result}
The results of the Bayesian linear regression models for Kamala Harris and Donald Trump are summarized in @tbl-model_summary_H and @tbl-model_summary_T.

```{r}
#| label: tbl-model_summary_H
#| echo: false
#| tbl-cap: "Summary statistics of the Bayesian model for Harris"
#| warning: false
# Load required packages
library(broom.mixed)  # For tidy model summaries from mixed models
library(dplyr)
library(readr)
library(knitr)  # For nicely formatted tables
library(modelsummary)

# Load the saved models
model1 <- readRDS(file = here::here("models/models_harris.rds"))

# Extract a tidy summary of the model
model_summary <- broom.mixed::tidy(model1, effects = "fixed", conf.int = TRUE) %>%
  select(term, estimate, std.error, conf.low, conf.high) %>%
  rename(
    Term = term,
    Estimate = estimate,
    `Std. Error` = std.error,
    `2.5% CI` = conf.low,
    `97.5% CI` = conf.high
  )

# Display the summary table
kable(model_summary, digits = 3)

```
```{r}
#| label: tbl-model_summary_T
#| echo: false
#| tbl-cap: "Summary statistics of the Bayesian model for Trump"
# Load required packages
library(broom.mixed)  # For tidy model summaries from mixed models
library(dplyr)
library(readr)
library(knitr)  # For nicely formatted tables

# Load the saved models
model2 <- readRDS(file = here::here("models/models_trump.rds"))

# Extract a tidy summary of the model
model_summary <- broom.mixed::tidy(model2, effects = "fixed", conf.int = TRUE) %>%
  select(term, estimate, std.error, conf.low, conf.high) %>%
  rename(
    Term = term,
    Estimate = estimate,
    `Std. Error` = std.error,
    `2.5% CI` = conf.low,
    `97.5% CI` = conf.high
  )

# Display the summary table
kable(model_summary, digits = 3)
```
## Overall trend
The intercept of both model is positive, with Harris at 40.47 and Trump slightly lower than Harris at 40.36. The trend of support rate for both candidates with respect of time is positive but Harris's increment (0.10) is larger than Trump's (0.06). 

## Model Diagnostics
The model diagnostics indicate a strong fit and reliable predictive performance for both candidates, as detailed in the plots in Appendix @sec-model-details. Posterior predictive checks (Figures @fig-pos_check_H and @fig-pos_check_T) show that the predicted values align well with the observed data, suggesting that the models effectively capture key data patterns. Furthermore, the comparison of posterior and prior variables indicates minimal deviation, affirming an appropriate choice of priors. The credible intervals for the predictors (Figures @fig-CI_H and @fig-CI_T) encompass the observed support rates, demonstrating that the models adequately account for uncertainty in their predictions.

Additional robustness checks (Figures @fig-DI_H and @fig-DI_T) confirm the stability of these models. The R-hat values for all parameters are below 1.1, indicating good convergence of the MCMC chains and reliable parameter estimates. This convergence supports the conclusion that the sampling process reached a stable distribution, reinforcing the credibility of our inferences.

In conclusion, these diagnostics verify that the models are both stable and effective in reflecting trends in the data, confirming their reliability for further analysis.

\newpage

\appendix

# Appendix


# Additional data details

## Model check {#sec-model-details}

```{r}
#| label: fig-pos_check_H
#| echo: false
#| fig-cap: "Posterior Predictive Check for All Models"

# Load necessary libraries
library(rstanarm)
library(bayesplot)
library(ggplot2)
library(patchwork)  # For combining plots

pp_check(model1) +  
    theme_classic() +
    theme(legend.position = "bottom")

just_harris_high_quality <- read.csv(here::here("data/02-analysis_data/Harris.csv"))

posterior_vs_prior(model1) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()

```
```{r}
#| label: fig-pos_check_T
#| echo: false
#| fig-cap: "Posterior Predictive Check for All Models"

# Load necessary libraries
library(rstanarm)
library(bayesplot)
library(ggplot2)
library(patchwork)  # For combining plots

pp_check(model2) +  
    theme_classic() +
    theme(legend.position = "bottom")

just_trump_high_quality <- read.csv(here::here("data/02-analysis_data/Trump.csv"))

posterior_vs_prior(model2) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()

```
```{r}
#| label: fig-CI_H
#| echo: false
#| fig-cap: "CI for predictors for Harris"

# Load necessary libraries
library(rstanarm)
library(bayesplot)
library(ggplot2)
library(patchwork)  # For combining plots

plot(
  model1,
  "areas")
```
```{r}
#| label: fig-CI_T
#| echo: false
#| fig-cap: "CI for predictors for Trump"

# Load necessary libraries
library(rstanarm)
library(bayesplot)
library(ggplot2)
library(patchwork)  # For combining plots

plot(
  model2,
  "areas")
```

```{r}
#| label: fig-DI_H
#| echo: false
#| fig-cap: "Model diagonostic for Harris"

# Load necessary libraries
library(rstanarm)
library(bayesplot)
library(ggplot2)
library(patchwork)  # For combining plots

plot(model1, "trace")
plot(model1, "rhat")

```
```{r}
#| label: fig-DI_T
#| echo: false
#| fig-cap: "Model diagonostic for Trump"

# Load necessary libraries
library(rstanarm)
library(bayesplot)
library(ggplot2)
library(patchwork)  # For combining plots

plot(model2, "trace")
plot(model2, "rhat")

```

\newpage
## pollster methodology analysis

This survey was conducted by Redfield & Wilton Strategies to assess the voting intentions of eligible voters in key U.S. swing states ahead of the 2024 Presidential Election. The primary goal of this poll is to provide an accurate and timely snapshot of public opinion in states where electoral outcomes are uncertain and could have a decisive impact on the overall result of the election. Swing states, due to their political volatility and diverse voter bases, are critical in determining the balance of power in the U.S. electoral system. Understanding voter preferences in these states is essential for political analysts, campaigns, and the general public.

### Population of Interest
The population of interest for this survey consists of all eligible voters residing in major U.S. swing states, specifically Arizona, Florida, Georgia, Michigan, North Carolina, and Pennsylvania. These states are known for their fluctuating political alignments and are expected to play a crucial role in the upcoming election.

### Sampling Frame
The population sampled includes eligible voters from Arizona, Florida, Georgia, Michigan, North Carolina, and Pennsylvania. Participants were selected via an online panel.

### Sample
The sample sizes for each state were as follows:

Arizona: 750 respondents

Florida: 1,350 respondents

Georgia: 927 respondents

Michigan: 970 respondents

North Carolina: 880 respondents

Pennsylvania: 1,070 respondents

## Weakness & Strength of the methodology

In terms of strengths, Redfield & Wilton has a great reputation for producing reliable polling data. They have employ a mix of online and telephone survey, which add in various resources of collecting their data. This approach can help reduce bias. In addition, Redfield & Wilton often target swing states, which makes their polls results important to the US president election.

The weakness of their methodology would incorporate a certain potential bias based on their political leaning of their clients or media. This could cause a certain neutrality in their dataset. 

Overall, Redfield & Wilton has been considered as a competent, reputable and reliable pollster with his variaty and methodology on polls. Even though the pollster contained a potential bias, it has been a reliable resource in prediction of US president election. 


# Model details {#sec-model-details}



\newpage

# Appendix 2 - Idealized Methodology and Survey

## Overview

This section introduces an idealized methodology and survey with $100K budget to predict the 2024 US presidential election. The goal is to maximize the accuracy of the prediction under the budget. The subsections that describe the details of the idealized methodology and survey include sampling approach, respondents recruiting method, data validation, poll aggregation and the survey questions.

### Sampling Approach

Cluster sampling is the sampling approach used. Specifically clusters are states. In our case, the swing states as they are the states that would affect the election result, i.e. Arizona, Florida, Gegorgia, Iowa, Michigan, Nevada, North Carolina, Pennsylvania, and Wisconsin. In each swing state, units are selected based on postal code. Using simple random sampling, 100 distinct postal codes are randomly selected. People whose living address have the postal codes selected are the target respondents. For the postal codes that lie in the non-residential area, the postal codes would be ignored.

### Recruitment Strategy

The strategy to be implemented to recruit respondents is a combination of physical and online recruitment. 

If the building corresponds to the postal code is a condo building, a paper with QR code to the survey is going to be put in the lobby or elevator, or sent to residents through the property management. If the building is a residential house, then a letter with the QR code would be put in the mailbox. 

All respondents are rewarded with a $5 deposit to their bank account or a gift card of their choice. Each IP address is limited to answer the survey once.

### Data Validation

To improve accuracy of the prediction results, the following data validation approaches will be done.

* Postal Code Validation
    + All the postal codes got from respondents are going to be validated to check if it is one of the randomly selected postal codes. If not, the response would not be considered when the prediction is done.
* Just-for-Rewards Prevention
    + To identify the responses that are not seriously answered, the last question of the survey is set test if the respondents are serious and careful when answering the questions.
* Age Validity
    + Responses with age under 18 but answered "Yes" to "Are you registered to Vote" are discarded.


### Poll Aggregation

For each of the swing states, the result would be calculated based on the votes to Trump versus Harris because they are the candidates with the greatest chances of winning. Based on the decisiveness of the respondents and the likelihood of voting from the responses, the individual votes will be weighted when calculating the results for each swing states.

To aggregate the polls for all states, the result of each states is multiplied by its electoral votes. After summing the electoral votes for Trump or Harris, the estimated electoral votes that Trump or Harris get is available. The candidate that has more than 270 electoral votes would be predicted to win the election {@nationalarchives2024electoral}.

### Survey

Google form of the survey is available here: [Google Form](https://docs.google.com/forms/d/1obaebX3zqw7WJEd1lHrF-DVBXdZt5tbjHofjsWj9zf8/prefill)

**US Presidential Election Survey** \
**Purpose:** pre-election survey on public votes distribution. \
**Estimated Completion Time:** Less than 5 minutes \

All responses are anonymous.

1. What is the postal code of where you live?

2. Are you registered to vote?

* Yes
* No

3. If the election were held today, who would you most likely vote for?

* Donald Trump - Republican
* Kamala Harris - Democrat
* Other Candidates
* Not Decided Yet
* Prefer not to say

4. How decisive are you to vote for the option you chose in the last question?

* Very Decisive
* Pretty Decisive
* A Bit Indecisive
* Very Indecisive

5. How many characters are present in the word "President"?

* 6
* 8
* 10
* None of the Above

6. What age group are you in?

* 0 - 18
* 19 - 30
* 31 - 50
* 51 - 70
* 71+

7. What is your sex?

* Male
* Female
* Non-binary
* Prefer not to say

8. What is your Ethnicity /Race?

* White
* Black or African American
* Hispanic or Latino
* Asian
* Native American or Alaska Native
* Native Hawaiian or Other Pacific Islander
* Middle Eastern or North African
* Prefer not to say


9. What is your Education Level?

* Less than high school
* High school diploma or equivalent
* Some college, no degree
* Associate’s degree
* Bachelor’s degree
* Master’s degree
* Professional or doctoral degree (JD, MD, PhD, etc.)
* Prefer not to say

10.How do you plan to vote?

* In-person on Election Day
* In-person early voting
* Mail-in/Absentee ballot
* Undecided

11. Is there anything else you’d like to share about your voting decision or concerns?


### Budget Specification

* Physical and Online Recruitment: $30,000
* Rewards for Respondents: $50,000
* Data Collection & Validation: $10,000
* Other: $10,000

Total: $100,000

### Conclusion

The survey uses cluster sampling to sample the swing states based on postal codes. After data collection and validation, weighting based on the likelihood of voting and decisiveness of the respondents, the total votes for Donald Trump and Kamala Harris are calulated. The candidate with more than 270 votes are predicted to win the election{@nationalarchives2024electoral}.

# References




